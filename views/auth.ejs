<!-- Auth Landing Page for Guests -->
<div class="row justify-content-center">
    <div class="col-lg-10">
        
        <!-- Hero Section -->
        <div class="text-center mb-5">
            <div class="bg-primary text-white p-5 rounded-4 shadow-lg">
                <h1 class="display-3 fw-bold mb-4">
                    <i class="bi bi-cloud-arrow-up me-3"></i>BDPADrive
                </h1>
                <p class="lead fs-4 mb-4">
                    Modern web-based word processing and file management
                </p>
                <p class="fs-5">
                    Create, edit, and manage your documents in the cloud with our powerful yet simple interface.
                </p>
            </div>
        </div>

        <!-- Features Overview -->
        <div class="row mb-5">
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="bi bi-file-earmark-text text-primary" style="font-size: 3rem;"></i>
                        <h5 class="card-title mt-3">Word Processing</h5>
                        <p class="card-text text-muted">Create and edit documents with our rich text editor, just like desktop applications.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="bi bi-cloud-upload text-success" style="font-size: 3rem;"></i>
                        <h5 class="card-title mt-3">Cloud Storage</h5>
                        <p class="card-text text-muted">Access your files from anywhere with secure cloud synchronization and backup.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="bi bi-people text-info" style="font-size: 3rem;"></i>
                        <h5 class="card-title mt-3">Collaboration</h5>
                        <p class="card-text text-muted">Share documents and collaborate with team members in real-time.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Authentication Section -->
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow-lg border-0">
                    <div class="card-header bg-white text-center py-4">
                        <h3 class="mb-0">Get Started with BDPADrive</h3>
                        <p class="text-muted mt-2 mb-0">Sign in to access your personalized workspace</p>
                    </div>
                    <div class="card-body p-5">
                        
                        <!-- Auth Tabs -->
                        <ul class="nav nav-pills nav-justified mb-4" id="authTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="signin-tab" data-bs-toggle="pill" data-bs-target="#signin" type="button" role="tab">
                                    <i class="bi bi-box-arrow-in-right me-2"></i>Sign In
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="signup-tab" data-bs-toggle="pill" data-bs-target="#signup" type="button" role="tab">
                                    <i class="bi bi-person-plus me-2"></i>Sign Up
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="forgot-tab" data-bs-toggle="pill" data-bs-target="#forgot" type="button" role="tab">
                                    <i class="bi bi-key me-2"></i>Forgot Password
                                </button>
                            </li>
                        </ul>

                        <!-- Auth Content -->
                        <div class="tab-content" id="authTabsContent">
                            
                            <!-- Sign In Form -->
                            <div class="tab-pane fade show active" id="signin" role="tabpanel">
                                <form id="signinForm">
                                    <div class="mb-3">
                                        <label for="signinEmail" class="form-label">Email Address</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                                            <input type="email" class="form-control" id="signinEmail" required>
                                        </div>
                                        <div class="invalid-feedback" id="signinEmailError"></div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="signinPassword" class="form-label">Password</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-lock"></i></span>
                                            <input type="password" class="form-control" id="signinPassword" required>
                                            <button type="button" class="btn btn-outline-secondary" id="toggleSigninPassword">
                                                <i class="bi bi-eye" id="signinPasswordIcon"></i>
                                            </button>
                                        </div>
                                        <div class="invalid-feedback" id="signinPasswordError"></div>
                                    </div>
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="rememberMe">
                                        <label class="form-check-label" for="rememberMe">
                                            Remember me for 30 days
                                        </label>
                                    </div>
                                    
                                    <!-- CAPTCHA Challenge (shown after failed attempts) -->
                                    <div id="captchaChallenge" class="mb-3 d-none">
                                        <label class="form-label">Security Check</label>
                                        <div class="card border-warning">
                                            <div class="card-body text-center">
                                                <p class="mb-2">Please solve: <strong id="captchaQuestion"></strong></p>
                                                <input type="number" class="form-control" id="captchaAnswer" placeholder="Enter answer">
                                                <small class="text-muted">This helps us verify you're human</small>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Rate limiting warning -->
                                    <div id="rateLimitWarning" class="alert alert-warning d-none">
                                        <i class="bi bi-exclamation-triangle me-2"></i>
                                        <span id="rateLimitMessage"></span>
                                    </div>
                                    
                                    <button type="submit" class="btn btn-primary btn-lg w-100" id="signinSubmitBtn">
                                        <i class="bi bi-box-arrow-in-right me-2"></i>Sign In
                                    </button>
                                </form>
                                
                                <!-- Test Account Information -->
                                <div class="mt-4 p-3 bg-info bg-opacity-10 border border-info rounded">
                                    <h6 class="text-info mb-3">
                                        <i class="bi bi-flask me-2"></i>Test Account (External API)
                                    </h6>
                                    <div class="row">
                                        <div class="col-12 mb-3">
                                            <div class="d-flex justify-content-between align-items-center bg-white p-2 rounded border">
                                                <div>
                                                    <strong>Email:</strong> testuser@example.com<br>
                                                    <strong>Password:</strong> testpass123
                                                </div>
                                                <button class="btn btn-info btn-sm" onclick="fillTestCredentials()">
                                                    <i class="bi bi-clipboard me-1"></i>Use Test Account
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <small class="text-muted">
                                        <i class="bi bi-info-circle me-1"></i>
                                        This test account uses PBKDF2 authentication with the external API. 
                                        First register this account, then use it to login.
                                    </small>
                                </div>
                                
                                <!-- Demo Accounts -->
                                <div class="mt-3 p-3 bg-light rounded">
                                    <h6 class="text-muted mb-2">Local Demo Accounts:</h6>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <small class="text-muted">
                                                <strong>User:</strong><br>
                                                demo@bdpadrive.com<br>
                                                password123
                                            </small>
                                        </div>
                                        <div class="col-sm-6">
                                            <small class="text-muted">
                                                <strong>Admin:</strong><br>
                                                admin@bdpadrive.com<br>
                                                admin123
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Sign Up Form -->
                            <div class="tab-pane fade" id="signup" role="tabpanel">
                                <form id="signupForm">
                                    <div class="mb-3">
                                        <label for="signupName" class="form-label">Full Name</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-person"></i></span>
                                            <input type="text" class="form-control" id="signupName" required minlength="2" maxlength="50">
                                        </div>
                                        <div class="invalid-feedback" id="signupNameError"></div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="signupUsername" class="form-label">Username</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-at"></i></span>
                                            <input type="text" class="form-control" id="signupUsername" required 
                                                   minlength="3" maxlength="20" pattern="^[a-zA-Z0-9_]+$">
                                        </div>
                                        <div class="form-text">3-20 characters, letters, numbers and underscores only</div>
                                        <div class="invalid-feedback" id="signupUsernameError"></div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="signupEmail" class="form-label">Email Address</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                                            <input type="email" class="form-control" id="signupEmail" required>
                                        </div>
                                        <div class="invalid-feedback" id="signupEmailError"></div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="signupPassword" class="form-label">Password</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-lock"></i></span>
                                            <input type="password" class="form-control" id="signupPassword" required 
                                                   minlength="8" maxlength="128">
                                            <button type="button" class="btn btn-outline-secondary" id="toggleSignupPassword">
                                                <i class="bi bi-eye" id="signupPasswordIcon"></i>
                                            </button>
                                        </div>
                                        <div class="form-text">
                                            Password must be 8-128 characters with uppercase, lowercase, number and special character
                                        </div>
                                        
                                        <!-- Password Strength Indicator -->
                                        <div class="mt-2">
                                            <div class="progress" style="height: 8px;">
                                                <div class="progress-bar" id="passwordStrengthBar" 
                                                     role="progressbar" style="width: 0%"></div>
                                            </div>
                                            <small class="text-muted" id="passwordStrengthText">Enter password to see strength</small>
                                        </div>
                                        
                                        <!-- Password Requirements -->
                                        <div class="mt-2">
                                            <small class="text-muted">Requirements:</small>
                                            <ul class="list-unstyled small">
                                                <li id="req-length"><i class="bi bi-x-circle text-danger"></i> At least 8 characters</li>
                                                <li id="req-upper"><i class="bi bi-x-circle text-danger"></i> One uppercase letter</li>
                                                <li id="req-lower"><i class="bi bi-x-circle text-danger"></i> One lowercase letter</li>
                                                <li id="req-number"><i class="bi bi-x-circle text-danger"></i> One number</li>
                                                <li id="req-special"><i class="bi bi-x-circle text-danger"></i> One special character</li>
                                            </ul>
                                        </div>
                                        <div class="invalid-feedback" id="signupPasswordError"></div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="signupConfirmPassword" class="form-label">Confirm Password</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
                                            <input type="password" class="form-control" id="signupConfirmPassword" required>
                                        </div>
                                        <div class="invalid-feedback" id="signupConfirmPasswordError"></div>
                                    </div>
                                    
                                    <!-- Terms and Privacy -->
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="agreeTerms" required>
                                        <label class="form-check-label" for="agreeTerms">
                                            I agree to the <a href="#" class="text-decoration-none">Terms of Service</a> 
                                            and <a href="#" class="text-decoration-none">Privacy Policy</a>
                                        </label>
                                    </div>
                                    
                                    <!-- CAPTCHA for Registration -->
                                    <div class="mb-3">
                                        <label class="form-label">Security Check</label>
                                        <div class="card border-info">
                                            <div class="card-body text-center">
                                                <p class="mb-2">Please solve: <strong id="signupCaptchaQuestion"></strong></p>
                                                <input type="number" class="form-control" id="signupCaptchaAnswer" required 
                                                       placeholder="Enter answer">
                                                <small class="text-muted">This helps us prevent spam accounts</small>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <button type="submit" class="btn btn-success btn-lg w-100" id="signupSubmitBtn">
                                        <i class="bi bi-person-plus me-2"></i>Create Account
                                    </button>
                                </form>
                                
                                <!-- Test Account Helper -->
                                <div class="mt-4 p-3 bg-success bg-opacity-10 border border-success rounded">
                                    <h6 class="text-success mb-3">
                                        <i class="bi bi-flask me-2"></i>Quick Test Registration
                                    </h6>
                                    <div class="d-flex justify-content-between align-items-center bg-white p-2 rounded border">
                                        <div>
                                            <small>
                                                <strong>Name:</strong> Test User<br>
                                                <strong>Email:</strong> testuser@example.com<br>
                                                <strong>Password:</strong> testpass123
                                            </small>
                                        </div>
                                        <button class="btn btn-success btn-sm" onclick="fillSignupTestCredentials()">
                                            <i class="bi bi-clipboard me-1"></i>Use for Signup
                                        </button>
                                    </div>
                                    <small class="text-muted mt-2 d-block">
                                        <i class="bi bi-info-circle me-1"></i>
                                        This creates a test account for the external API with PBKDF2 authentication.
                                    </small>
                                </div>
                            </div>
                            
                            <!-- Forgot Password Form -->
                            <div class="tab-pane fade" id="forgot" role="tabpanel">
                                <form id="forgotPasswordForm">
                                    <div class="mb-4 text-center">
                                        <i class="bi bi-key text-warning" style="font-size: 3rem;"></i>
                                        <h4 class="mt-3 mb-2">Reset Your Password</h4>
                                        <p class="text-muted">Enter your email address and we'll send you a link to reset your password.</p>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="forgotEmail" class="form-label">Email Address</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                                            <input type="email" class="form-control" id="forgotEmail" required 
                                                   placeholder="Enter your email address">
                                        </div>
                                        <div class="invalid-feedback" id="forgotEmailError"></div>
                                    </div>
                                    
                                    <button type="submit" class="btn btn-warning btn-lg w-100" id="forgotSubmitBtn">
                                        <i class="bi bi-envelope me-2"></i>Send Reset Link
                                    </button>
                                </form>
                                
                                <!-- Success Message -->
                                <div id="forgotSuccessMessage" class="alert alert-success mt-3 d-none">
                                    <i class="bi bi-check-circle me-2"></i>
                                    <strong>Email Sent!</strong> If an account with that email exists, 
                                    you'll receive a password reset link shortly. Check your email (including spam folder).
                                </div>
                                
                                <div class="mt-4 text-center">
                                    <p class="text-muted mb-2">Remember your password?</p>
                                    <button type="button" class="btn btn-link" 
                                            onclick="document.getElementById('signin-tab').click()">
                                        Back to Sign In
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Password Reset Modal -->
        <div class="modal fade" id="passwordResetModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header bg-warning text-dark">
                        <h5 class="modal-title">
                            <i class="bi bi-shield-lock me-2"></i>Reset Password
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <form id="resetPasswordForm">
                            <input type="hidden" id="resetToken" />
                            
                            <div class="mb-3">
                                <label for="resetEmail" class="form-label">Email Address</label>
                                <input type="email" class="form-control" id="resetEmail" readonly>
                            </div>
                            
                            <div class="mb-3">
                                <label for="resetNewPassword" class="form-label">New Password</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="resetNewPassword" required minlength="8">
                                    <button type="button" class="btn btn-outline-secondary" id="toggleResetPassword">
                                        <i class="bi bi-eye" id="resetPasswordIcon"></i>
                                    </button>
                                </div>
                                <div class="form-text">
                                    Password must be 8+ characters with uppercase, lowercase, number and special character
                                </div>
                                
                                <!-- Password Strength Indicator -->
                                <div class="mt-2">
                                    <div class="progress" style="height: 8px;">
                                        <div class="progress-bar" id="resetPasswordStrengthBar" 
                                             role="progressbar" style="width: 0%"></div>
                                    </div>
                                    <small class="text-muted" id="resetPasswordStrengthText">Enter password to see strength</small>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="resetConfirmPassword" class="form-label">Confirm New Password</label>
                                <input type="password" class="form-control" id="resetConfirmPassword" required>
                            </div>
                            
                            <div id="resetPasswordError" class="alert alert-danger d-none"></div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-warning" onclick="submitPasswordReset()">
                            <i class="bi bi-shield-check me-2"></i>Reset Password
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Info -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="text-center">
                    <h4 class="text-muted mb-3">Why Choose BDPADrive?</h4>
                    <div class="row">
                        <div class="col-md-3">
                            <i class="bi bi-shield-check text-success" style="font-size: 2rem;"></i>
                            <h6 class="mt-2">Secure</h6>
                            <small class="text-muted">Enterprise-grade security</small>
                        </div>
                        <div class="col-md-3">
                            <i class="bi bi-lightning text-warning" style="font-size: 2rem;"></i>
                            <h6 class="mt-2">Fast</h6>
                            <small class="text-muted">Lightning-fast performance</small>
                        </div>
                        <div class="col-md-3">
                            <i class="bi bi-phone text-info" style="font-size: 2rem;"></i>
                            <h6 class="mt-2">Mobile</h6>
                            <small class="text-muted">Works on any device</small>
                        </div>
                        <div class="col-md-3">
                            <i class="bi bi-headset text-primary" style="font-size: 2rem;"></i>
                            <h6 class="mt-2">Support</h6>
                            <small class="text-muted">24/7 customer support</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Function to fill test credentials for signin
function fillTestCredentials() {
    document.getElementById('signinEmail').value = 'testuser@example.com';
    document.getElementById('signinPassword').value = 'testpass123';
    
    // Add visual feedback
    const button = event.target.closest('button');
    const originalText = button.innerHTML;
    button.innerHTML = '<i class="bi bi-check me-1"></i>Filled!';
    button.className = 'btn btn-success btn-sm';
    
    setTimeout(() => {
        button.innerHTML = originalText;
        button.className = 'btn btn-info btn-sm';
    }, 1500);
}

// Function to fill test credentials for signup
function fillSignupTestCredentials() {
    document.getElementById('signupName').value = 'Test User';
    document.getElementById('signupEmail').value = 'testuser@example.com';
    document.getElementById('signupPassword').value = 'testpass123';
    document.getElementById('signupConfirmPassword').value = 'testpass123';
    
    // Add visual feedback
    const button = event.target.closest('button');
    const originalText = button.innerHTML;
    button.innerHTML = '<i class="bi bi-check me-1"></i>Filled!';
    button.className = 'btn btn-success btn-sm';
    
    setTimeout(() => {
        button.innerHTML = originalText;
        button.className = 'btn btn-success btn-sm';
    }, 1500);
}
</script>